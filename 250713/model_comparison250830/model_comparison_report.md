# 模型評估與穩健性比較報告

本報告對多個 Wi-Fi 室內定位模型在不同資料損壞情境下的效能進行了評估與比較，旨在測試模型的穩健性。

**說明**：
- **整體位置誤差**：所有測試樣本的位置預測誤差
- **條件位置誤差**：只針對建築物和樓層都預測正確的樣本計算的位置誤差
- **多次測試**：每個情境進行 5 次獨立測試並報告平均值±標準差
- **統一測試次數**：即使是原始資料也進行 5 次測試，以評估模型內部隨機性和數值穩定性

## 📊 視覺化圖表說明

本報告包含多種類型的圖表，以下是各類圖表的閱讀指南：

### 🔹 基礎比較圖表

1. **分類準確度對比圖** (`classification_accuracy_[情境].svg`)
   - 顯示建築物和樓層分類的準確率
   - 縱軸：準確率百分比
   - 橫軸：不同模型
   - 藍色柱狀：建築物分類準確率，橙色柱狀：樓層分類準確率
   - 數值越高表示分類效果越好

2. **位置預測誤差對比圖** (`position_errors_[情境].svg`)
   - 顯示各模型的平均位置預測誤差
   - 縱軸：誤差（公尺）
   - 橫軸：不同模型
   - 數值越低表示定位越精確

### 🔹 誤差分布圖表

3. **箱型圖** (`error_boxplot_[情境].svg`)
   - 顯示誤差的統計分布特性
   - 箱子：代表 25%-75% 分位數範圍（四分位距 IQR）
   - 中線：中位數
   - 虛線：平均值
   - 觸鬚：延伸至 1.5×IQR 範圍
   - 紅點：異常值（超出觸鬚範圍的樣本）
   - 箱子越窄表示誤差分布越集中，異常值越少表示模型越穩定

4. **小提琴圖** (`error_violin_[情境].svg`)
   - 結合箱型圖和密度分布的優點
   - 寬度：代表該誤差值的樣本密度
   - 內部線條：中位數和四分位數
   - 形狀：顯示誤差分布的詳細形態
   - 對稱的「小提琴」形狀表示正態分布，不對稱則表示偏斜分布

5. **累積分布函數（CDF）圖** (`error_cdf_[情境].svg`)
   - 顯示達到特定誤差閾值的樣本百分比
   - 橫軸：誤差值（公尺）
   - 縱軸：累積百分比（%）
   - 重要閾值：1m、2m、3m（用灰色虛線標示）
   - 曲線越陡峭表示誤差越集中，左上角的曲線表示誤差越小
   - 點狀標記：顯示在 1m、2m、3m 閾值下的精確百分比

6. **詳細分布直方圖** (`error_detailed_distribution_[情境].svg`)
   - 子圖形式顯示每個模型的誤差分布
   - 藍色柱狀：誤差頻率分布
   - 紅色虛線：平均值
   - 橙色虛線：中位數
   - 右上角文字：統計摘要（樣本數、標準差、90%分位數）
   - 分布集中在左側表示大多數樣本誤差較小

7. **統計總結表格圖** (`error_statistics_table_[情境].svg`)
   - 以表格形式總結各模型的關鍵統計指標
   - 平均值：所有樣本的平均誤差
   - 中位數：排序後中間值的誤差
   - 標準差：誤差分布的離散程度
   - Q25/Q75：25% 和 75% 分位數
   - P90：90% 分位數（表示 90% 的樣本誤差都小於此值）
   - <1m/<2m/<3m：誤差小於指定閾值的樣本百分比

### 🔹 穩健性分析圖表

8. **跨情境穩健性測試圖**
   - `robustness_building_accuracy.svg`：建築物分類在不同情境下的表現
   - `robustness_floor_accuracy.svg`：樓層分類在不同情境下的表現
   - `robustness_position_error.svg`：位置預測在不同情境下的表現
   - 不同顏色柱狀代表不同模型
   - 從左到右：原始資料→高斯雜訊→設備故障→複合干擾
   - 觀察柱狀高度的變化程度可評估模型穩健性

9. **穩健性評分圖** (`robustness_scores.svg`)
   - 綜合評分，1.0 表示完美保持基準性能
   - 評分越高表示在惡劣條件下性能保持越好
   - 原始資料情境固定為 1.0（基準）
   - 其他情境的評分反映相對於基準的性能保持率

### 📈 如何解讀結果

**選擇最佳模型的參考原則：**

1. **準確率優先**：建築物和樓層分類準確率越高越好
2. **誤差最小化**：位置預測誤差越小越好（特別關注條件位置誤差）
3. **穩定性考量**：箱型圖中箱子越窄、異常值越少表示越穩定
4. **穩健性要求**：在干擾情境下性能下降幅度越小越好
5. **應用需求**：根據實際應用對準確率和精度的不同要求權衡選擇

**異常情況識別：**

- CDF 圖中曲線過於平緩：表示誤差分布過於分散
- 箱型圖中異常值過多：表示模型預測不穩定
- 穩健性評分急劇下降：表示模型對干擾敏感
- 多峰分布（小提琴圖或直方圖）：可能存在系統性偏差

## 情境: 原始資料

### 📸 相關視覺化圖表

此情境的詳細分析圖表包括：

- 📊 [分類準確度對比](./classification_accuracy_原始資料.svg)
- 📈 [位置誤差對比](./position_errors_原始資料.svg)
- 📦 [誤差箱型圖](./error_boxplot_原始資料.svg)
- 🎻 [誤差密度分布](./error_violin_原始資料.svg)
- 📉 [誤差累積分布](./error_cdf_原始資料.svg)
- 📋 [詳細分布圖](./error_detailed_distribution_原始資料.svg)
- 📑 [統計摘要表](./error_statistics_table_原始資料.svg)

**📝 解讀重點：**
- 此為基準情境，展現各模型在理想條件下的最佳性能
- 重點觀察各模型的絕對性能表現
- 注意條件位置誤差與整體位置誤差的差異

此情境下，各模型表現如下：

|    | 模型名稱       | 建築物準確率 (%)   | 樓層準確率 (%)   | 條件位置平均誤差 (公尺)   |   正確分類樣本數 |   位置中位數誤差 (公尺) |   位置標準差 (公尺) |   測試次數 |
|----|----------------|--------------------|------------------|---------------------------|------------------|-------------------------|---------------------|------------|
|  0 | original HADNN | 100.0000           | 100.0000         | 0.4359±0.0000             |              211 |                  0.3856 |              0.2975 |          5 |
|  1 | mlp            | 99.5261±0.0000     | 99.5261±0.0000   | 0.8555±0.0000             |              210 |                  0.8343 |              0.4592 |          5 |
|  2 | hadnn+rf       | 98.5782±0.0000     | 99.5261±0.0000   | 0.9812                    |              207 |                  1.0195 |              0.5019 |          5 |
## 情境: 高斯雜訊 5dB

### 📸 相關視覺化圖表

此情境的詳細分析圖表包括：

- 📊 [分類準確度對比](./classification_accuracy_高斯雜訊_5dB.svg)
- 📈 [位置誤差對比](./position_errors_高斯雜訊_5dB.svg)
- 📦 [誤差箱型圖](./error_boxplot_高斯雜訊_5dB.svg)
- 🎻 [誤差密度分布](./error_violin_高斯雜訊_5dB.svg)
- 📉 [誤差累積分布](./error_cdf_高斯雜訊_5dB.svg)
- 📋 [詳細分布圖](./error_detailed_distribution_高斯雜訊_5dB.svg)
- 📑 [統計摘要表](./error_statistics_table_高斯雜訊_5dB.svg)

**📝 解讀重點：**
- 高斯雜訊模擬 Wi-Fi 信號的隨機擾動
- 觀察各模型對信號噪音的抗干擾能力
- 關注準確率下降幅度和誤差增加程度

此情境下，各模型表現如下：

|    | 模型名稱       |   建築物準確率 (%) |   樓層準確率 (%) |   條件位置平均誤差 (公尺) |   正確分類樣本數 |   位置中位數誤差 (公尺) |   位置標準差 (公尺) |   測試次數 |
|----|----------------|--------------------|------------------|---------------------------|------------------|-------------------------|---------------------|------------|
|  0 | original HADNN |            45.4976 |          31.2796 |                    0.6161 |               32 |                  1.8761 |              1.0772 |          5 |
|  1 | mlp            |            45.4976 |          31.2796 |                    1.4742 |               32 |                  1.3247 |              0.6649 |          5 |
|  2 | hadnn+rf       |            45.4976 |          31.2796 |                    1.6497 |               32 |                  1.3499 |              0.6478 |          5 |
## 情境: 設備故障 10%

### 📸 相關視覺化圖表

此情境的詳細分析圖表包括：

- 📊 [分類準確度對比](./classification_accuracy_設備故障_10%.svg)
- 📈 [位置誤差對比](./position_errors_設備故障_10%.svg)
- 📦 [誤差箱型圖](./error_boxplot_設備故障_10%.svg)
- 🎻 [誤差密度分布](./error_violin_設備故障_10%.svg)
- 📉 [誤差累積分布](./error_cdf_設備故障_10%.svg)
- 📋 [詳細分布圖](./error_detailed_distribution_設備故障_10%.svg)
- 📑 [統計摘要表](./error_statistics_table_設備故障_10%.svg)

**📝 解讀重點：**
- 模擬 AP 設備故障或信號遮蔽情況
- 評估模型在部分信息缺失時的補償能力
- 高故障率（50%）模擬極端惡劣環境

此情境下，各模型表現如下：

|    | 模型名稱       | 建築物準確率 (%)   | 樓層準確率 (%)   | 條件位置平均誤差 (公尺)   |   正確分類樣本數 |   位置中位數誤差 (公尺) |   位置標準差 (公尺) |   測試次數 |
|----|----------------|--------------------|------------------|---------------------------|------------------|-------------------------|---------------------|------------|
|  0 | original HADNN | 28.2464±1.7114     | 16.3981±1.2212   | 1.2138±0.1594             |                8 |                  1.4958 |              0.8009 |          5 |
|  1 | mlp            | 27.9621±1.1609     | 25.4976±2.9123   | 0.8477±0.0935             |               17 |                  1.5093 |              0.7614 |          5 |
|  2 | hadnn+rf       | 28.5308±2.4425     | 17.4408±1.2857   | 1.4394±0.1397             |                9 |                  1.6804 |              0.8019 |          5 |
## 情境: 設備故障 50%

### 📸 相關視覺化圖表

此情境的詳細分析圖表包括：

- 📊 [分類準確度對比](./classification_accuracy_設備故障_50%.svg)
- 📈 [位置誤差對比](./position_errors_設備故障_50%.svg)
- 📦 [誤差箱型圖](./error_boxplot_設備故障_50%.svg)
- 🎻 [誤差密度分布](./error_violin_設備故障_50%.svg)
- 📉 [誤差累積分布](./error_cdf_設備故障_50%.svg)
- 📋 [詳細分布圖](./error_detailed_distribution_設備故障_50%.svg)
- 📑 [統計摘要表](./error_statistics_table_設備故障_50%.svg)

**📝 解讀重點：**
- 模擬 AP 設備故障或信號遮蔽情況
- 評估模型在部分信息缺失時的補償能力
- 高故障率（50%）模擬極端惡劣環境

此情境下，各模型表現如下：

|    | 模型名稱       | 建築物準確率 (%)   | 樓層準確率 (%)   | 條件位置平均誤差 (公尺)   |   正確分類樣本數 |   位置中位數誤差 (公尺) |   位置標準差 (公尺) |   測試次數 |
|----|----------------|--------------------|------------------|---------------------------|------------------|-------------------------|---------------------|------------|
|  0 | original HADNN | 27.9621±3.0420     | 17.0616±2.0549   | 1.0733±0.0677             |               12 |                  1.5321 |              0.759  |          5 |
|  1 | mlp            | 27.4882±2.0107     | 23.6019±1.8815   | 0.9186±0.1194             |               15 |                  1.4594 |              0.6771 |          5 |
|  2 | hadnn+rf       | 29.1943±2.7570     | 19.9052±1.2359   | 1.2208±0.2188             |               11 |                  1.4728 |              0.7098 |          5 |
## 情境: 雜訊 5dB + 故障 10%

### 📸 相關視覺化圖表

此情境的詳細分析圖表包括：

- 📊 [分類準確度對比](./classification_accuracy_雜訊_5dB_+_故障_10%.svg)
- 📈 [位置誤差對比](./position_errors_雜訊_5dB_+_故障_10%.svg)
- 📦 [誤差箱型圖](./error_boxplot_雜訊_5dB_+_故障_10%.svg)
- 🎻 [誤差密度分布](./error_violin_雜訊_5dB_+_故障_10%.svg)
- 📉 [誤差累積分布](./error_cdf_雜訊_5dB_+_故障_10%.svg)
- 📋 [詳細分布圖](./error_detailed_distribution_雜訊_5dB_+_故障_10%.svg)
- 📑 [統計摘要表](./error_statistics_table_雜訊_5dB_+_故障_10%.svg)

**📝 解讀重點：**
- 高斯雜訊模擬 Wi-Fi 信號的隨機擾動
- 觀察各模型對信號噪音的抗干擾能力
- 關注準確率下降幅度和誤差增加程度

此情境下，各模型表現如下：

|    | 模型名稱       | 建築物準確率 (%)   | 樓層準確率 (%)   | 條件位置平均誤差 (公尺)   |   正確分類樣本數 |   位置中位數誤差 (公尺) |   位置標準差 (公尺) |   測試次數 |
|----|----------------|--------------------|------------------|---------------------------|------------------|-------------------------|---------------------|------------|
|  0 | original HADNN | 25.4028±1.8134     | 17.3460±3.0213   | 1.2092±0.1949             |                8 |                  1.511  |              0.7359 |          5 |
|  1 | mlp            | 26.9194±0.5527     | 25.7820±1.5166   | 0.8885±0.0211             |               17 |                  1.5203 |              0.7266 |          5 |
|  2 | hadnn+rf       | 27.4882±1.8233     | 17.6303±0.9190   | 1.7349±0.2268             |                9 |                  1.788  |              0.8674 |          5 |
## 📂 附錄：完整圖表清單

### 各情境專用圖表

**原始資料：**
- `classification_accuracy_原始資料.svg` - 分類準確度對比
- `position_errors_原始資料.svg` - 位置誤差對比
- `error_boxplot_原始資料.svg` - 誤差箱型圖
- `error_violin_原始資料.svg` - 誤差小提琴圖
- `error_cdf_原始資料.svg` - 誤差累積分布函數
- `error_detailed_distribution_原始資料.svg` - 詳細誤差分布
- `error_statistics_table_原始資料.svg` - 統計摘要表格

**高斯雜訊 5dB：**
- `classification_accuracy_高斯雜訊_5dB.svg` - 分類準確度對比
- `position_errors_高斯雜訊_5dB.svg` - 位置誤差對比
- `error_boxplot_高斯雜訊_5dB.svg` - 誤差箱型圖
- `error_violin_高斯雜訊_5dB.svg` - 誤差小提琴圖
- `error_cdf_高斯雜訊_5dB.svg` - 誤差累積分布函數
- `error_detailed_distribution_高斯雜訊_5dB.svg` - 詳細誤差分布
- `error_statistics_table_高斯雜訊_5dB.svg` - 統計摘要表格

**設備故障 10%：**
- `classification_accuracy_設備故障_10%.svg` - 分類準確度對比
- `position_errors_設備故障_10%.svg` - 位置誤差對比
- `error_boxplot_設備故障_10%.svg` - 誤差箱型圖
- `error_violin_設備故障_10%.svg` - 誤差小提琴圖
- `error_cdf_設備故障_10%.svg` - 誤差累積分布函數
- `error_detailed_distribution_設備故障_10%.svg` - 詳細誤差分布
- `error_statistics_table_設備故障_10%.svg` - 統計摘要表格

**設備故障 50%：**
- `classification_accuracy_設備故障_50%.svg` - 分類準確度對比
- `position_errors_設備故障_50%.svg` - 位置誤差對比
- `error_boxplot_設備故障_50%.svg` - 誤差箱型圖
- `error_violin_設備故障_50%.svg` - 誤差小提琴圖
- `error_cdf_設備故障_50%.svg` - 誤差累積分布函數
- `error_detailed_distribution_設備故障_50%.svg` - 詳細誤差分布
- `error_statistics_table_設備故障_50%.svg` - 統計摘要表格

**雜訊 5dB + 故障 10%：**
- `classification_accuracy_雜訊_5dB_+_故障_10%.svg` - 分類準確度對比
- `position_errors_雜訊_5dB_+_故障_10%.svg` - 位置誤差對比
- `error_boxplot_雜訊_5dB_+_故障_10%.svg` - 誤差箱型圖
- `error_violin_雜訊_5dB_+_故障_10%.svg` - 誤差小提琴圖
- `error_cdf_雜訊_5dB_+_故障_10%.svg` - 誤差累積分布函數
- `error_detailed_distribution_雜訊_5dB_+_故障_10%.svg` - 詳細誤差分布
- `error_statistics_table_雜訊_5dB_+_故障_10%.svg` - 統計摘要表格

### 跨情境分析圖表

- `robustness_building_accuracy.svg` - 建築物分類穩健性測試
- `robustness_floor_accuracy.svg` - 樓層分類穩健性測試
- `robustness_position_error.svg` - 位置預測穩健性測試
- `robustness_scores.svg` - 綜合穩健性評分

### 📊 建議的圖表查看順序

1. **快速概覽**：先查看各情境的分類準確度和位置誤差對比圖
2. **深入分析**：查看箱型圖和 CDF 圖了解誤差分布特性
3. **詳細檢視**：查看詳細分布圖和統計表格獲取具體數值
4. **穩健性評估**：查看跨情境圖表了解模型在不同條件下的表現
5. **綜合評分**：參考穩健性評分圖做出最終決策

---